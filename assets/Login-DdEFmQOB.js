import{r,_ as F,R as M,c as P,P as f,w as k,u as B,j as s,C as G,x as _}from"./index-Bd778Qe4.js";import{c as b,b as C}from"./index.esm-DxxmU9r2.js";import{d as A,b as y,c as h,a as p}from"./CRow-5hfcp1sd.js";import{c as N,d as w,a as T,b as U,e as q,f as z}from"./cil-user-xxyo0guq.js";import{C as v}from"./CInputGroup-DKqn44tN.js";import{C as E}from"./CInputGroupText-s3Zpc6wr.js";const x=r.forwardRef((e,o)=>{var{children:t,className:i}=e,a=F(e,["children","className"]);return M.createElement("div",Object.assign({className:P("card-group",i)},a,{ref:o}),t)});x.propTypes={children:f.node,className:f.string};x.displayName="CCardGroup";function D(e=0,o=2){return Math.floor(Math.random()*(o-e+1)+e)}const S=["sarah@urbancuts.com","m@urbancuts.com","j@urbancuts.com","s@urbancuts.com","r@urbancuts.com","owner@urbancuts.com"],I=S[D(0,S.length-1)],V=()=>{const[e,o]=r.useState(I),[t,i]=r.useState(I),[a,l]=r.useState(!1),[g,c]=r.useState(""),d=k(),{user:m}=B();r.useEffect(()=>{console.log("[todo Login] useEffect-> user",m),m&&(console.log("[todo Login] useEffect->navigate(/dashboard) --->>"),d("/dashboard"))},[m,d]);const L=async n=>{if(console.log("[todo handleSubmit]"),n.preventDefault(),l(!0),c(""),!e||!t){c("Please fill in all fields"),l(!1);return}try{const{user:u,session:R,error:j}=await _(e,t);if(j)throw new Error(j);console.log("[todo handleSubmit] authUser ",u),console.log("[todo handleSubmit] session ",R)}catch(u){c(u.message||"Login failed")}finally{l(!1)}};return s.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:s.jsx(A,{children:s.jsx(y,{className:"justify-content-center",children:s.jsx(h,{md:8,children:s.jsxs(x,{children:[s.jsx(N,{className:"p-4",children:s.jsx(w,{children:s.jsxs(T,{onSubmit:L,children:[s.jsx("h1",{children:"Login"}),s.jsx("p",{className:"text-body-secondary",children:"Sign In to your Melon Business account"}),g&&s.jsx(U,{color:"danger",className:"mb-3",children:g}),s.jsxs(v,{className:"mb-3",children:[s.jsx(E,{children:s.jsx(b,{icon:q})}),s.jsx(C,{type:"email",placeholder:"Email",autoComplete:"email",value:e,onChange:n=>o(n.target.value),required:!0,disabled:a})]}),s.jsxs(v,{className:"mb-4",children:[s.jsx(E,{children:s.jsx(b,{icon:z})}),s.jsx(C,{type:"password",placeholder:"Password",autoComplete:"current-password",value:t,onChange:n=>i(n.target.value),required:!0,disabled:a})]}),s.jsxs(y,{children:[s.jsx(h,{xs:6,children:s.jsx(p,{type:"submit",color:"primary",className:"px-4",disabled:a,children:a?s.jsxs(s.Fragment,{children:[s.jsx(G,{size:"sm",className:"me-2"}),"Signing in..."]}):"Login"})}),s.jsx(h,{xs:6,className:"text-right",children:s.jsx(p,{color:"link",className:"px-0",children:"Forgot password?"})})]})]})})}),s.jsx(N,{className:"text-white bg-primary py-5",style:{width:"44%"},children:s.jsx(w,{className:"text-center",children:s.jsxs("div",{children:[s.jsx("h2",{children:"Melon Business"}),s.jsx("p",{children:"Manage your beauty business with our comprehensive platform. Handle appointments, staff, clients, and grow your business with AI-powered insights."}),s.jsx(p,{color:"primary",className:"mt-3",active:!0,tabIndex:-1,onClick:()=>d("/register"),disabled:a,children:"Register Now!"})]})})})]})})})})})};export{V as default};
