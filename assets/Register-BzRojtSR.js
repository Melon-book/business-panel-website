import{u as E,j as r,C as P,i as H}from"./index-BbxOhHFI.js";import{a,j as R}from"./vendor-39lPmIfa.js";import{c,b as n}from"./index.esm-BfaSJJoF.js";import{d as A,b as V,c as k,a as g}from"./CRow-DRWLq7Bg.js";import{c as q,d as I,a as F,b as G,e as L,f as j}from"./cil-user-2Chx0D6f.js";import{C as d}from"./CInputGroup-DwtM3Mdf.js";import{C as m}from"./CInputGroupText-CFTe340s.js";import"./redux-B4nc4lEw.js";var U=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M440,464V16H72V464H16v32H496V464Zm-32,0H272V400H240v64H104V48H408Z' class='ci-primary'/><rect width='32' height='32' x='160' y='304' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='240' y='304' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='320' y='304' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='160' y='208' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='240' y='208' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='320' y='208' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='160' y='112' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='240' y='112' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='320' y='112' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/>"];const W=()=>{const[u,w]=a.useState("Owner Business"),[h,b]=a.useState("owner@urbancuts.com"),[i,v]=a.useState("owner@urbancuts.com"),[p,N]=a.useState("owner@urbancuts.com"),[s,t]=a.useState(!1),[y,o]=a.useState(""),l=R(),{user:C}=E();a.useEffect(()=>{C&&l("/dashboard")},[C,l]);const S=async e=>{if(console.log("[DEBUG] Register handleSubmit()"),e.preventDefault(),t(!0),o(""),!u||!h||!i||!p){o("Please fill in all fields"),t(!1);return}if(i!==p){o("Passwords do not match"),t(!1);return}if(i.length<6){o("Password must be at least 6 characters long"),t(!1);return}try{const{user:x,session:B,business:z,error:f}=await H(u,h,i);if(f)throw new Error(f);x&&B&&l("/dashboard")}catch(x){o(x.message||"Registration failed")}finally{t(!1)}};return r.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:r.jsx(A,{children:r.jsx(V,{className:"justify-content-center",children:r.jsx(k,{md:9,lg:7,xl:6,children:r.jsx(q,{className:"mx-4",children:r.jsx(I,{className:"p-4",children:r.jsxs(F,{onSubmit:S,children:[r.jsx("h1",{children:"Register"}),r.jsx("p",{className:"text-body-secondary",children:"Create your Melon Business account"}),y&&r.jsx(G,{color:"danger",className:"mb-3",children:y}),r.jsxs(d,{className:"mb-3",children:[r.jsx(m,{children:r.jsx(c,{icon:U})}),r.jsx(n,{type:"text",placeholder:"Business Name",autoComplete:"organization",value:u,onChange:e=>w(e.target.value),required:!0,disabled:s})]}),r.jsxs(d,{className:"mb-3",children:[r.jsx(m,{children:r.jsx(c,{icon:L})}),r.jsx(n,{type:"email",placeholder:"Email",autoComplete:"email",value:h,onChange:e=>b(e.target.value),required:!0,disabled:s})]}),r.jsxs(d,{className:"mb-3",children:[r.jsx(m,{children:r.jsx(c,{icon:j})}),r.jsx(n,{type:"password",placeholder:"Password",autoComplete:"new-password",value:i,onChange:e=>v(e.target.value),required:!0,disabled:s})]}),r.jsxs(d,{className:"mb-4",children:[r.jsx(m,{children:r.jsx(c,{icon:j})}),r.jsx(n,{type:"password",placeholder:"Confirm Password",autoComplete:"new-password",value:p,onChange:e=>N(e.target.value),required:!0,disabled:s})]}),r.jsx("div",{className:"d-grid",children:r.jsx(g,{type:"submit",color:"success",disabled:s,children:s?r.jsxs(r.Fragment,{children:[r.jsx(P,{size:"sm",className:"me-2"}),"Creating Account..."]}):"Create Account"})}),r.jsxs("div",{className:"text-center mt-3",children:[r.jsx("span",{className:"text-body-secondary",children:"Already have an account? "}),r.jsx(g,{color:"link",className:"p-0",onClick:()=>l("/login"),disabled:s,children:"Sign in here"})]})]})})})})})})})};export{W as default};
