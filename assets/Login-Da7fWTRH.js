import{_ as R,c as k,P as N,u as A,N as c,j as e,C as F,l as G}from"./index-BCkWgzQb.js";import{a as o,R as T,j as q}from"./vendor-CMvHcHbC.js";import{c as y,b as w}from"./index.esm-CCPNyHGR.js";import{u as U}from"./useLocale-DrialdEC.js";import{d as _,b as P,c as u,a as x}from"./CRow-D1-3sYH3.js";import{c as v,d as S,a as B,b as D}from"./CForm-CpmwTKZX.js";import{C as E}from"./CInputGroup-D-nF2F6K.js";import{C as L}from"./CInputGroupText-CZAH0dMK.js";import{c as H}from"./cil-user-Ddrdy7PS.js";import{c as z}from"./cil-lock-locked-DmxpJbVL.js";import"./redux-IAqEd8mO.js";const j=o.forwardRef((r,d)=>{var{children:i,className:m}=r,a=R(r,["children","className"]);return T.createElement("div",Object.assign({className:k("card-group",m)},a,{ref:d}),i)});j.propTypes={children:N.node,className:N.string};j.displayName="CCardGroup";const ee=()=>{const[r,d]=o.useState(""),[i,m]=o.useState(""),[a,g]=o.useState(!1),[f,h]=o.useState(""),t=q(),{user:p}=A(),{t:s}=U();o.useEffect(()=>{console.log("[todo Login] useEffect-> user",p),p&&t(c.dashboard)},[p,t]);const I=async l=>{if(console.log("[todo handleSubmit]"),l.preventDefault(),g(!0),h(""),!r||!i){h(s("loginPage.errors.allFieldsRequired")),g(!1);return}try{const{user:n,session:C,error:b}=await G(r,i);if(b)throw new Error(b);console.log("[todo handleSubmit] authUser ",n),console.log("[todo handleSubmit] session ",C),n&&C&&t(c.dashboard)}catch(n){h(n.message||"Login failed")}finally{g(!1)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(_,{children:e.jsx(P,{className:"justify-content-center",children:e.jsx(u,{md:8,children:e.jsxs(j,{children:[e.jsx(v,{className:"p-4",children:e.jsx(S,{children:e.jsxs(B,{onSubmit:I,children:[e.jsx("h1",{children:s("common.actions.login")}),e.jsx("p",{className:"text-body-secondary",children:s("loginPage.description")}),f&&e.jsx(D,{color:"danger",className:"mb-3",children:f}),e.jsxs(E,{className:"mb-3",children:[e.jsx(L,{children:e.jsx(y,{icon:H})}),e.jsx(w,{type:"email",placeholder:s("loginPage.placeholders.email"),autoComplete:"email",value:r,onChange:l=>d(l.target.value),required:!0,disabled:a})]}),e.jsxs(E,{className:"mb-4",children:[e.jsx(L,{children:e.jsx(y,{icon:z})}),e.jsx(w,{type:"password",placeholder:s("loginPage.placeholders.password"),autoComplete:"current-password",value:i,onChange:l=>m(l.target.value),required:!0,disabled:a})]}),e.jsxs(P,{children:[e.jsx(u,{xs:6,children:e.jsx(x,{type:"submit",color:"primary",className:"px-4",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(F,{size:"sm",className:"me-2"}),s("loginPage.signingIn")]}):s("common.actions.login")})}),e.jsx(u,{xs:6,className:"text-right",children:e.jsx(x,{color:"link",className:"px-0",onClick:()=>t(c.forgotPassword),disabled:a,children:s("loginPage.forgotPassword")})})]})]})})}),e.jsx(v,{className:"text-white bg-primary py-4",style:{width:"100%"},children:e.jsx(S,{className:"text-center",children:e.jsxs("div",{children:[e.jsx("h2",{children:s("loginPage.brandHeading")}),e.jsx("p",{children:s("loginPage.brandDescription")}),e.jsx(x,{color:"primary",className:"mt-3",active:!0,tabIndex:-1,onClick:()=>t(c.register),disabled:a,children:s("loginPage.registerNow")})]})})})]})})})})})};export{ee as default};
