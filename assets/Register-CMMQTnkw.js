import{r as a,w as E,u as P,j as r,C as H,y as R}from"./index-Bd778Qe4.js";import{c as o,b as n}from"./index.esm-DxxmU9r2.js";import{d as A,b as V,c as k,a as g}from"./CRow-5hfcp1sd.js";import{c as q,d as I,a as F,b as G,e as L,f as j}from"./cil-user-xxyo0guq.js";import{C as d}from"./CInputGroup-DKqn44tN.js";import{C as m}from"./CInputGroupText-s3Zpc6wr.js";var U=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M440,464V16H72V464H16v32H496V464Zm-32,0H272V400H240v64H104V48H408Z' class='ci-primary'/><rect width='32' height='32' x='160' y='304' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='240' y='304' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='320' y='304' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='160' y='208' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='240' y='208' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='320' y='208' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='160' y='112' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='240' y='112' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='320' y='112' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/>"];const K=()=>{const[u,w]=a.useState("Owner Business"),[h,b]=a.useState("owner@urbancuts.com"),[i,v]=a.useState("owner@urbancuts.com"),[p,N]=a.useState("owner@urbancuts.com"),[s,t]=a.useState(!1),[y,l]=a.useState(""),c=E(),{user:C}=P();a.useEffect(()=>{C&&c("/dashboard")},[C,c]);const S=async e=>{if(console.log("[DEBUG] Register handleSubmit()"),e.preventDefault(),t(!0),l(""),!u||!h||!i||!p){l("Please fill in all fields"),t(!1);return}if(i!==p){l("Passwords do not match"),t(!1);return}if(i.length<6){l("Password must be at least 6 characters long"),t(!1);return}try{const{user:x,session:B,business:z,error:f}=await R(u,h,i);if(f)throw new Error(f);x&&B&&c("/dashboard")}catch(x){l(x.message||"Registration failed")}finally{t(!1)}};return r.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:r.jsx(A,{children:r.jsx(V,{className:"justify-content-center",children:r.jsx(k,{md:9,lg:7,xl:6,children:r.jsx(q,{className:"mx-4",children:r.jsx(I,{className:"p-4",children:r.jsxs(F,{onSubmit:S,children:[r.jsx("h1",{children:"Register"}),r.jsx("p",{className:"text-body-secondary",children:"Create your Melon Business account"}),y&&r.jsx(G,{color:"danger",className:"mb-3",children:y}),r.jsxs(d,{className:"mb-3",children:[r.jsx(m,{children:r.jsx(o,{icon:U})}),r.jsx(n,{type:"text",placeholder:"Business Name",autoComplete:"organization",value:u,onChange:e=>w(e.target.value),required:!0,disabled:s})]}),r.jsxs(d,{className:"mb-3",children:[r.jsx(m,{children:r.jsx(o,{icon:L})}),r.jsx(n,{type:"email",placeholder:"Email",autoComplete:"email",value:h,onChange:e=>b(e.target.value),required:!0,disabled:s})]}),r.jsxs(d,{className:"mb-3",children:[r.jsx(m,{children:r.jsx(o,{icon:j})}),r.jsx(n,{type:"password",placeholder:"Password",autoComplete:"new-password",value:i,onChange:e=>v(e.target.value),required:!0,disabled:s})]}),r.jsxs(d,{className:"mb-4",children:[r.jsx(m,{children:r.jsx(o,{icon:j})}),r.jsx(n,{type:"password",placeholder:"Confirm Password",autoComplete:"new-password",value:p,onChange:e=>N(e.target.value),required:!0,disabled:s})]}),r.jsx("div",{className:"d-grid",children:r.jsx(g,{type:"submit",color:"success",disabled:s,children:s?r.jsxs(r.Fragment,{children:[r.jsx(H,{size:"sm",className:"me-2"}),"Creating Account..."]}):"Create Account"})}),r.jsxs("div",{className:"text-center mt-3",children:[r.jsx("span",{className:"text-body-secondary",children:"Already have an account? "}),r.jsx(g,{color:"link",className:"p-0",onClick:()=>c("/login"),disabled:s,children:"Sign in here"})]})]})})})})})})})};export{K as default};
